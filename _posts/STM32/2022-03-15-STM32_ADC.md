---
layout: single
title: STM32 ADC

categories : [STM32]
tags : [STM32, ADC]

toc: true
toc_sticky: true

date: 2022-03-15
last_modified_at: 2022-03-15
---

## ADC : Analog to Digital Converter

아날로그 값을 여러 단계로 나눠 디지털 값으로 변환


ADC resoltion : 12bit -> 4096 (0~4095)  
Reference 전압(VREF) : 3.3V 동작 전압  


결과값이 1500 이라면  
ADC 1당 전압[V] = VREF / Bit_Resolution = 3.3V / 4096 = 0.806mV  
ADC로 측정된 전압 = ADC 1당 전압[V]* ADC 결과 = 0.806 * 1500 = 1.209 V  


ADC 3채널, 하위 16, 16, 8 채널 => 같은 라인 핀 공유, 최대 16개 ADC 가능  

DMA : Direct Memory Access  (peripheral to memory 방식)   
특정 메모리 복사 및 저장할 때 자동으로 작업없이 메모리에 복사됨
AD 변환(12bits) -> DMA 컨트롤러 -> 데이터 변수에 저장(16bits)   

-> 없다면 for, while을 통해 데이터 값을 변수(Memory)에 저장  
-> 큰 CPU Clock 소모없이 데이터 복사 가능(CPU 효율 상승)  
  
ADC1  
Clock Prescaler : 변환할 때 CPU클럭 필요 사이클  
Scan Conversion Mode : 순차적 작업  
Continuous Conversion Mode : 계속 자동으로 변환 작업  
  
ADC1의 Configuration - DMA Setting - ADD - ADC1, 
Mode - Circular 선택  
1. DMA Continuous Requests    - Enabled  
2. Scan Conversion Mode       - Enabled  
3. Continuous Conversion Mode - Enabled  

Data Width 
1. Byte      - 8 bits  
2. Half Word - 16bits  
3. Word      - 32bits  
12bits AD 변환이라서 Half Word 선택하면 된다.  
